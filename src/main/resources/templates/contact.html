<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <!-- Common Links -->
    <th:block th:insert="~{/fragments/main :: headlinks}" />

    <!-- Page Specific -->
    <title>Contact Us | eRadios.in - Submit Enquiries or Feedback</title>
    <link rel="canonical" href="https://www.eradios.in/contact" />

    <!-- SEO and Social Sharing Meta Tags -->
    <meta name="description"
        content="Contact eRadios.in for feedback, support, copyright issues, or to add your station. We're here to help you with any enquiry about our global radio streaming platform.">
    <meta name="keywords"
        content="eRadios, contact, online radio, radio streaming, feedback, support, add station, copyright, enquiry">
    <meta name="author" content="eRadios.in">
    <meta property="og:title" content="Contact eRadios.in - Get in Touch">
    <meta property="og:description"
        content="Reach out to eRadios.in for support, feedback, or to add your radio station. We're here to help you enjoy the best global radio streaming experience.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.eradios.in/contact">
    <meta property="og:site_name" content="eRadios.in">
    <meta property="og:image" content="https://www.eradios.in/images/logo.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Contact eRadios.in - Get in Touch">
    <meta name="twitter:description"
        content="Reach out to eRadios.in for support, feedback, or to add your radio station. We're here to help you enjoy the best global radio streaming experience.">
    <meta name="twitter:image" content="https://www.eradios.in/images/logo.png">
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "ContactPage",
            "name": "Contact Us - eRadios.in",
            "url": "https://www.eradios.in/contact",
            "description": "Use our contact form to reach eRadios.in for support, feedback, or station submissions.",
            "publisher": {
                "@type": "Organization",
                "name": "eRadios.in"
            }
        }
    </script>
</head>

<body>

    <!-- Loader Overlay -->
    <div th:replace="~{/fragments/main :: pageloader}"></div>

    <!-- Navigation Bar -->
    <div th:replace="~{/fragments/main :: navbar}"></div>

    <!-- Contact Form -->
    <section class="py-3">
        <div class="container">
            <div class="feature-section mb-3">
                <h1 class="h5">Contact Us</h1>
                <p class="small text-light">
                    Have a question, suggestion, or copyright concern? We'd love to hear from you.
                    Use the form below to get in touch — whether you're a listener, station
                    owner, or just curious. We usually respond within 1–2 business days.
                </p>
            </div>
            <div class="bg-white p-3">
                <div id="formMessage" class="mb-3"></div>
                <form id="contactForm" action="/contact/submit" method="POST" novalidate>
                    <!-- Full Name -->
                    <div class="mb-3">
                        <label for="fullName" class="form-label">Full Name</label>
                        <input type="text" class="form-control form-control-sm text-muted" id="fullName" name="fullName" required
                            pattern="[A-Za-z\s]{2,50}" placeholder="Enter your full name">
                        <div class="invalid-feedback">
                            Please enter a valid name (2-50 characters, letters and spaces only).
                        </div>
                    </div>

                    <!-- Email -->
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control form-control-sm text-muted" id="email" name="email" required
                            placeholder="Enter your email">
                        <div class="invalid-feedback">
                            Please enter a valid email address.
                        </div>
                    </div>

                    <!-- Subject -->
                    <div class="mb-3">
                        <label for="subject" class="form-label">Subject</label>
                        <select class="form-select form-select-sm text-muted" id="subject" name="subject" required>
                            <option value="" disabled selected>Select a subject</option>
                            <option value="Something is broken on website">Something is broken on website</option>
                            <option value="Copyright Infringement report">Copyright Infringement report</option>
                            <option value="Feedback">Feedback</option>
                            <option value="Other enquiry">Other Enquiry</option>
                        </select>
                        <div class="invalid-feedback">
                            Please select a subject.
                        </div>
                    </div>

                    <!-- Content -->
                    <div class="mb-3">
                        <label for="content" class="form-label">Message</label>
                        <textarea class="form-control form-control-sm text-muted" id="content" name="content" rows="17" required minlength="10"
                            maxlength="500" placeholder="Write your message here"></textarea>
                        <div class="invalid-feedback">
                            Please enter a message (10-500 characters).
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="d-grid">
                        <button type="submit" class="btn btn-warning btn-md btn-submit">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <div th:replace="~{/fragments/main :: footer}"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Form Validation Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            'use strict';
            const form = document.getElementById('contactForm');
            form.addEventListener('submit', function (event) {
                event.preventDefault();
                event.stopPropagation();

                if (!form.checkValidity()) {
                    form.classList.add('was-validated');
                    return;
                }

                // Gather form data
                const data = {
                    fullName: form.fullName.value,
                    email: form.email.value,
                    subject: form.subject.value,
                    content: form.content.value
                };

                const formMessage = document.getElementById('formMessage');
                const submitBtn = form.querySelector('button[type="submit"], .submitBtn');
                const originalBtnContent = submitBtn.innerHTML;

                // Show loader on button and disable it
                submitBtn.innerHTML = `<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Sending...`;
                submitBtn.disabled = true;
                formMessage.textContent = '';
                formMessage.className = 'mb-3';

                fetch('/api/email', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                })
                    .then(response => {
                        if (response.ok) {
                            formMessage.textContent = 'Your message has been sent successfully!';
                            formMessage.className = 'mb-3 alert alert-success';
                            form.reset();
                            form.classList.remove('was-validated');
                        } else {
                            formMessage.textContent = 'There was an error sending your message. Please try again later.';
                            formMessage.className = 'mb-3 alert alert-danger';
                        }
                    })
                    .catch(() => {
                        formMessage.textContent = 'There was an error sending your message. Please try again later.';
                        formMessage.className = 'mb-3 alert alert-danger';
                    })
                    .finally(() => {
                        submitBtn.innerHTML = originalBtnContent;
                        submitBtn.disabled = false;
                    });
            }, false);
        })();
    </script>
    <!-- Custom JS -->
    <script th:src="@{/js/scripts.js}"></script>
</body>

</html>